const { execSync } = require('child_process');

try {
    require.resolve("canvas");
    require.resolve("axios");
    require.resolve("fs-extra");
    require.resolve("moment-timezone");
} catch (e) {
    execSync('npm install canvas axios fs-extra path moment-timezone', { stdio: 'inherit' });
}

const axios = require('axios');
const fs = require('fs-extra');
const path = require('path');
const moment = require('moment-timezone');
const { createCanvas, loadImage } = require('canvas');

module.exports.config = {
  name: "autoramadan",
  version: "60.0.0",
  hasPermssion: 0,
  credits: "Belal x Gemini",
  description: "à§¬à§¦+ à¦°à§à¦¯à¦¾à¦¨à§à¦¡à¦® à¦•à§à¦¯à¦¾à¦ªà¦¶à¦¨ à¦“ à¦¡à¦¿à¦Ÿà§‡à¦‡à¦²à¦¸ à¦•à¦¾à¦°à§à¦¡",
  commandCategory: "system",
  usages: "",
  cooldowns: 10
};

const AUTO_TIME = 90 * 60 * 1000; 

module.exports.onLoad = async function ({ api }) {
    setInterval(async () => {
        try {
            const allThreads = await api.getThreadList(10, null, ["INBOX"]);
            const groupThreads = allThreads.filter(t => t.isGroup && t.isSubscribed);
            for (const thread of groupThreads) {
                const threadID = thread.threadID;
                const threadInfo = await api.getThreadInfo(threadID);
                const participantIDs = threadInfo.participantIDs;
                const randomID = participantIDs[Math.floor(Math.random() * participantIDs.length)];
                await generateAndSendCard(api, threadID, randomID);
                await new Promise(resolve => setTimeout(resolve, 3000));
            }
        } catch (err) { console.log(err); }
    }, AUTO_TIME);
};

async function generateAndSendCard(api, threadID, targetID) {
    const cachePath = path.join(__dirname, 'cache', `auto_ramadan_${targetID}.png`);
    try {
        if (!fs.existsSync(path.join(__dirname, 'cache'))) fs.mkdirSync(path.join(__dirname, 'cache'));
        const userInfo = await api.getUserInfo(targetID);
        const user = userInfo[targetID];
        if (!user) return;
        
        const targetName = user.name;
        const currentTime = moment.tz("Asia/Dhaka").format("hh:mm A");
        const currentDay = moment.tz("Asia/Dhaka").format("dddd");

        const bgLinks = [
            "https://i.imgur.com/MyIixkI.jpeg", "https://i.imgur.com/KiCRZXT.jpeg",
            "https://i.imgur.com/49AMxfD.jpeg", "https://i.imgur.com/8g7AhHw.jpeg",
            "https://i.imgur.com/ByJ3eBQ.jpeg", "https://i.imgur.com/gpJ3ubG.jpeg"
        ];
        const randomBG = bgLinks[Math.floor(Math.random() * bgLinks.length)];

        const canvas = createCanvas(1200, 675);
        const ctx = canvas.getContext('2d');
        const background = await loadImage(randomBG);
        ctx.drawImage(background, 0, 0, 1200, 675);

        const profilePicUrl = `https://graph.facebook.com/${targetID}/picture?width=512&height=512&access_token=6628568379|c1e620fa708a1d5696fb991c1bde5662`;
        const avatar = await loadImage(profilePicUrl);
        
        ctx.save();
        ctx.beginPath(); ctx.arc(250, 337, 150, 0, Math.PI * 2, true); ctx.closePath();
        ctx.lineWidth = 15; ctx.strokeStyle = '#FFD700'; ctx.stroke();
        ctx.clip(); ctx.drawImage(avatar, 100, 187, 300, 300);
        ctx.restore();

        ctx.textAlign = "left"; ctx.fillStyle = "#FFD700"; ctx.font = 'bold 50px Arial';
        ctx.fillText(targetName.toUpperCase(), 450, 220);
        ctx.fillStyle = "#ffffff"; ctx.font = '30px Arial';
        ctx.fillText(`ðŸ†” UID: ${targetID}`, 450, 280);
        ctx.fillText(`ðŸ“… Day: ${currentDay}`, 450, 330);
        ctx.fillText(`â° Time: ${currentTime}`, 450, 380);
        ctx.fillStyle = "#00FFCC"; ctx.font = 'italic bold 38px Arial';
        ctx.fillText("ðŸŒ™ RAMADAN & EID SPECIAL IDENTITY", 450, 480);
        ctx.textAlign = "center"; ctx.fillStyle = "rgba(255, 255, 255, 0.8)"; ctx.font = 'bold 22px Arial';
        ctx.fillText("ðŸ‘‘ MASTER BELAL ULTRA-NET COMMAND CENTER ðŸ‘‘", 600, 630);

        const buffer = canvas.toBuffer('image/png');
        fs.writeFileSync(cachePath, buffer);

        const eidDate = moment.tz("2026-03-20 06:00", "Asia/Dhaka");
        const now = moment.tz("Asia/Dhaka");
        const diff = moment.duration(eidDate.diff(now));
        const countdown = `${diff.days()} à¦¦à¦¿à¦¨ ${diff.hours()} à¦˜à¦£à§à¦Ÿà¦¾ à¦¬à¦¾à¦•à¦¿`;

        const captions = [
            `à¦†à¦¸à¦¸à¦¾à¦²à¦¾à¦®à§ à¦†à¦²à¦¾à¦‡à¦•à§à¦® @${targetName}, à¦†à¦²à§à¦²à¦¾à¦¹ à¦†à¦ªà¦¨à¦¾à¦° à¦¸à¦¿à§Ÿà¦¾à¦® à¦•à¦¬à§à¦² à¦•à¦°à§à¦¨à¥¤ ðŸŒ™`,
            `à¦¸à§à¦ªà§‡à¦¶à¦¾à¦² à¦¸à¦¾à¦°à¦ªà§à¦°à¦¾à¦‡à¦œ @${targetName}! à¦ªà¦¬à¦¿à¦¤à§à¦° à¦°à¦®à¦œà¦¾à¦¨à§‡à¦° à¦¶à§à¦­à§‡à¦šà§à¦›à¦¾à¥¤ âœ¨`,
            `à¦®à¦¾à¦¸à§à¦Ÿà¦¾à¦° à¦¬à§‡à¦²à¦¾à¦²à§‡à¦° à¦ªà¦•à§à¦· à¦¥à§‡à¦•à§‡ @${targetName} à¦†à¦ªà¦¨à¦¾à¦° à¦œà¦¨à§à¦¯ à¦à¦•à¦Ÿà¦¿ à¦¬à¦¿à¦¶à§‡à¦· à¦‰à¦ªà¦¹à¦¾à¦°à¥¤ ðŸŽ`,
            `à¦–à¦¾à¦¸ à¦¦à§‹à§Ÿà¦¾ à¦†à¦ªà¦¨à¦¾à¦° à¦œà¦¨à§à¦¯ @${targetName}, à¦°à¦®à¦œà¦¾à¦¨ à¦®à§à¦¬à¦¾à¦°à¦•! ðŸ•‹`,
            `à¦ˆà¦¦ à¦†à¦¸à¦›à§‡! @${targetName} à¦…à¦—à§à¦°à¦¿à¦® à¦ˆà¦¦ à¦®à§‹à¦¬à¦¾à¦°à¦• à¦—à§à¦°à¦¹à¦£ à¦•à¦°à§à¦¨à¥¤ ðŸŽŠ`,
            `à¦†à¦²à§à¦²à¦¾à¦¹ à¦†à¦ªà¦¨à¦¾à¦° à¦œà§€à¦¬à¦¨à§‡ à¦°à¦®à¦œà¦¾à¦¨à§‡à¦° à¦¨à§‚à¦° à¦¬à¦¾à§œà¦¿à§Ÿà§‡ à¦¦à¦¿à¦¨, @${targetName}à¥¤ âœ¨`,
            `à¦¸à¦¹à§€à¦¹à¦­à¦¾à¦¬à§‡ à¦°à§‹à¦œà¦¾ à¦°à¦¾à¦–à¦¾à¦° à¦¤à§Œà¦«à¦¿à¦• à¦¦à¦¾à¦¨ à¦•à¦°à§à¦¨, à¦†à¦®à¦¿à¦¨à¥¤ @${targetName} ðŸ¤²`,
            `à¦†à¦ªà¦¨à¦¾à¦° à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ à¦¸à§‡à¦¹à¦°à¦¿ à¦“ à¦‡à¦«à¦¤à¦¾à¦° à¦¹à§‹à¦• à¦¬à¦°à¦•à¦¤à¦®à§Ÿ, @${targetName}à¥¤ ðŸŒ™`,
            `à¦¹à§‡ à¦†à¦²à§à¦²à¦¾à¦¹, @${targetName}-à¦•à§‡ à¦œà¦¾à¦¨à§à¦¨à¦¾à¦¤à§à¦² à¦«à¦¿à¦°à¦¦à¦¾à¦‰à¦¸ à¦¨à¦¸à§€à¦¬ à¦•à¦°à§à¦¨à¥¤ ðŸ•Œ`,
            `à¦°à¦®à¦œà¦¾à¦¨à§‡à¦° à¦à¦‡ à¦ªà¦¬à¦¿à¦¤à§à¦° à¦®à¦¾à¦¸à§‡ à¦†à¦ªà¦¨à¦¾à¦° à¦¸à¦•à¦² à¦—à§à¦£à¦¾à¦¹ à¦®à¦¾à¦« à¦¹à§‹à¦•à¥¤ @${targetName} âœ¨`,
            `à¦¤à¦¾à¦•à¦“à§Ÿà¦¾ à¦…à¦°à§à¦œà¦¨à§‡à¦° à¦®à¦¾à¦¸ à¦°à¦®à¦œà¦¾à¦¨, à¦®à§‹à¦¬à¦¾à¦°à¦•à¦¬à¦¾à¦¦ @${targetName}à¥¤ â˜ªï¸`,
            `à¦†à¦ªà¦¨à¦¾à¦° à¦¨à§‡à¦• à¦†à¦®à¦²à¦—à§à¦²à§‹ à¦•à¦¬à§à¦² à¦¹à§‹à¦•, @${targetName}à¥¤ ðŸ•‹`,
            `à¦¶à¦¾à¦¨à§à¦¤à¦¿ à¦“ à¦°à¦¹à¦®à¦¤à§‡à¦° à¦›à¦¾à§Ÿà¦¾à¦¤à¦²à§‡ à¦•à¦¾à¦Ÿà§à¦• à¦†à¦ªà¦¨à¦¾à¦° à¦¦à¦¿à¦¨à¦—à§à¦²à§‹à¥¤ @${targetName} ðŸ•Šï¸`,
            `à¦•à§à¦°à¦†à¦¨ à¦¨à¦¾à¦œà¦¿à¦²à§‡à¦° à¦®à¦¾à¦¸à§‡ à¦†à¦ªà¦¨à¦¾à¦•à§‡ à¦œà¦¾à¦¨à¦¾à¦‡ à¦ªà§à¦°à¦¾à¦£à¦¢à¦¾à¦²à¦¾ à¦¶à§à¦­à§‡à¦šà§à¦›à¦¾à¥¤ @${targetName} ðŸ“–`,
            `à¦‡à¦¬à¦¾à¦¦à¦¤à§‡à¦° à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ à¦®à§à¦¹à§‚à¦°à§à¦¤ à¦¹à§‹à¦• à¦†à¦¨à¦¨à§à¦¦à¦®à§Ÿà¥¤ @${targetName} âœ¨`,
            `à¦†à¦²à§à¦²à¦¾à¦¹à¦° à¦°à¦¹à¦®à¦¤à§‡ à¦¸à¦¿à¦•à§à¦¤ à¦¹à§‹à¦• à¦†à¦ªà¦¨à¦¾à¦° à¦œà§€à¦¬à¦¨à¥¤ @${targetName} ðŸ¤²`,
            `à¦¸à¦¹à¦œ à¦¹à§‹à¦• à¦†à¦ªà¦¨à¦¾à¦° à¦°à§‹à¦œà¦¾à¦° à¦ªà¦¥ à¦šà¦²à¦¾à¥¤ @${targetName} ðŸŒ™`,
            `à¦§à§ˆà¦°à§à¦¯ à¦“ à¦¸à¦‚à¦¯à¦®à§‡à¦° à¦à¦‡ à¦®à¦¾à¦¸à§‡ à¦†à¦ªà¦¨à¦¾à¦° à¦œà¦¨à§à¦¯ à¦¦à§‹à§Ÿà¦¾ à¦°à¦‡à¦²à¥¤ @${targetName} ðŸ’Ž`,
            `à¦¹à§‡ à¦†à¦²à§à¦²à¦¾à¦¹, à¦†à¦®à¦¾à¦¦à§‡à¦° à¦°à§‹à¦œà¦¾à¦—à§à¦²à§‹ à¦•à¦¬à§à¦² à¦•à¦°à§à¦¨à¥¤ à¦†à¦®à¦¿à¦¨à¥¤ @${targetName} ðŸ•Œ`,
            `à¦†à¦ªà¦¨à¦¾à¦° à¦˜à¦°à§‡ à¦†à¦¸à§à¦• à¦°à¦®à¦œà¦¾à¦¨à§‡à¦° à¦ªà§à¦°à¦¶à¦¾à¦¨à§à¦¤à¦¿à¥¤ @${targetName} ðŸ `,
            `à¦°à¦®à¦œà¦¾à¦¨à§‡à¦° à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ à¦¦à¦¿à¦¨ à¦¹à§‹à¦• à¦¸à¦“à§Ÿà¦¾à¦¬ à¦¹à¦¾à¦¸à¦¿à¦²à§‡à¦° à¦¦à¦¿à¦¨à¥¤ @${targetName} ðŸ“ˆ`,
            `à¦¶à§Ÿà¦¤à¦¾à¦¨ à¦¥à§‡à¦•à§‡ à¦®à§à¦•à§à¦¤à¦¿ à¦“ à¦†à¦²à§à¦²à¦¾à¦¹à¦° à¦¨à§ˆà¦•à¦Ÿà§à¦¯ à¦²à¦¾à¦­ à¦¹à§‹à¦• à¦†à¦ªà¦¨à¦¾à¦° à¦²à¦•à§à¦·à§à¦¯à¥¤ @${targetName} ðŸ›¡ï¸`,
            `à¦¸à¦¬à¦° à¦“ à¦¶à§à¦•à¦°à¦¿à§Ÿà¦¾ à¦¦à¦¿à§Ÿà§‡ à¦¸à¦¾à¦œà§à¦• à¦†à¦ªà¦¨à¦¾à¦° à¦œà§€à¦¬à¦¨à¥¤ @${targetName} âœ¨`,
            `à¦²à¦¾à¦‡à¦²à¦¾à¦¤à§à¦² à¦•à¦¦à¦°à§‡à¦° à¦®à¦¾à¦¹à¦¾à¦¤à§à¦®à§à¦¯ à¦†à¦ªà¦¨à¦¾à¦° à¦¨à¦¸à§€à¦¬ à¦¹à§‹à¦•à¥¤ @${targetName} ðŸŒŒ`,
            `à¦°à¦®à¦œà¦¾à¦¨à§‡à¦° à¦¶à§‡à¦· à¦¦à¦¶à¦•à§‡à¦° à¦¨à¦¾à¦œà¦¾à¦¤ à¦†à¦ªà¦¨à¦¾à¦° à¦œà¦¨à§à¦¯ à¦¬à¦°à¦¾à¦¦à§à¦¦ à¦¹à§‹à¦•à¥¤ @${targetName} ðŸ•¯ï¸`,
            `à¦ªà¦°à¦¿à¦¬à¦¾à¦° à¦¨à¦¿à§Ÿà§‡ à¦¸à§à¦¸à§à¦¥à¦­à¦¾à¦¬à§‡ à¦ˆà¦¦ à¦ªà¦¾à¦²à¦¨ à¦•à¦°à§à¦¨à¥¤ @${targetName} ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦`,
            `à¦®à¦¾à¦¸à§à¦Ÿà¦¾à¦° à¦¬à§‡à¦²à¦¾à¦²à§‡à¦° à¦Ÿà¦¿à¦®à§‡à¦° à¦ªà¦•à§à¦· à¦¥à§‡à¦•à§‡ à¦†à¦ªà¦¨à¦¾à¦° à¦œà¦¨à§à¦¯ à¦¦à§‹à§Ÿà¦¾à¥¤ @${targetName} ðŸ›°ï¸`,
            `à¦†à¦ªà¦¨à¦¾à¦° à¦†à¦¤à§à¦®à¦¿à¦• à¦¶à¦¾à¦¨à§à¦¤à¦¿ à¦¬à¦œà¦¾à§Ÿ à¦¥à¦¾à¦•à§à¦• à¦à¦‡ à¦®à¦¾à¦¸à§‡à¥¤ @${targetName} ðŸ§˜â€â™‚ï¸`,
            `à¦°à¦®à¦œà¦¾à¦¨à§‡à¦° à¦ªà¦¬à¦¿à¦¤à§à¦°à¦¤à¦¾ à¦›à§œà¦¿à§Ÿà§‡ à¦ªà§œà§à¦• à¦šà¦¾à¦°à¦¦à¦¿à¦•à§‡à¥¤ @${targetName} ðŸŒŠ`,
            `à¦•à§à¦·à¦®à¦¾à¦° à¦à¦‡ à¦¬à¦¸à¦¨à§à¦¤à§‡ à¦¸à¦¿à¦•à§à¦¤ à¦¹à§‹à¦• à¦†à¦ªà¦¨à¦¾à¦° à¦…à¦¨à§à¦¤à¦°à¥¤ @${targetName} ðŸŒ¸`,
            `à¦¸à¦¬à§à¦œ à¦œà¦¾à¦¨à§à¦¨à¦¾à¦¤à§‡à¦° à¦¸à§à¦¸à¦‚à¦¬à¦¾à¦¦ à¦†à¦¸à§à¦• à¦†à¦ªà¦¨à¦¾à¦° à¦•à¦¾à¦›à§‡à¥¤ @${targetName} ðŸŒ³`,
            `à¦‡à¦®à¦¾à¦¨à§‡à¦° à¦¸à¦¾à¦¥à§‡ à¦°à§‹à¦œà¦¾ à¦ªà§‚à¦°à§à¦£ à¦•à¦°à¦¾à¦° à¦¶à¦•à§à¦¤à¦¿ à¦¦à¦¾à¦¨ à¦•à¦°à§à¦¨à¥¤ @${targetName} ðŸ’ª`,
            `à¦†à¦²à§à¦²à¦¾à¦¹à¦° à§¯à§¯ à¦¨à¦¾à¦®à§‡à¦° à¦œà¦¿à¦•à¦¿à¦°à§‡ à¦•à¦¾à¦Ÿà§à¦• à¦†à¦ªà¦¨à¦¾à¦° à¦¸à¦®à§Ÿà¥¤ @${targetName} ðŸ“¿`,
            `à¦†à¦ªà¦¨à¦¾à¦° à¦¸à¦•à¦² à¦¦à§à¦¶à§à¦šà¦¿à¦¨à§à¦¤à¦¾ à¦¦à§‚à¦° à¦¹à§‹à¦• à¦à¦‡ à¦°à¦®à¦œà¦¾à¦¨à§‡à¥¤ @${targetName} ðŸŒˆ`,
            `à¦¹à§ƒà¦¦à§Ÿà§‡à¦° à¦ªà¦¬à¦¿à¦¤à§à¦°à¦¤à¦¾ à¦¬à¦œà¦¾à§Ÿ à¦¥à¦¾à¦•à§à¦• à¦†à¦œà§€à¦¬à¦¨à¥¤ @${targetName} â¤ï¸`,
            `à¦¬à§‡à¦²à¦¾à¦² à¦­à¦¾à¦‡à§Ÿà§‡à¦° à¦¸à§à¦ªà§‡à¦¶à¦¾à¦² à¦°à§‹à¦¬à¦Ÿ à¦†à¦ªà¦¨à¦¾à¦•à§‡ à¦¶à§à¦­à§‡à¦šà§à¦›à¦¾ à¦œà¦¾à¦¨à¦¾à¦šà§à¦›à§‡à¥¤ @${targetName} ðŸ¤–`,
            `à¦¬à§œà¦¦à§‡à¦° à¦¶à§à¦°à¦¦à§à¦§à¦¾ à¦“ à¦›à§‹à¦Ÿà¦¦à§‡à¦° à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾à§Ÿ à¦•à¦¾à¦Ÿà§à¦• à¦°à¦®à¦œà¦¾à¦¨à¥¤ @${targetName} ðŸ¤`,
            `à¦—à¦°à§€à¦¬-à¦¦à§à¦ƒà¦–à§€à¦° à¦ªà¦¾à¦¶à§‡ à¦¦à¦¾à¦à§œà¦¾à¦¨à§‹à¦° à¦¤à§Œà¦«à¦¿à¦• à¦¹à§‹à¦• à¦†à¦ªà¦¨à¦¾à¦°à¥¤ @${targetName} ðŸ²`,
            `à¦®à¦¿à¦¥à§à¦¯à¦¾ à¦¤à§à¦¯à¦¾à¦— à¦•à¦°à§‡ à¦¸à¦¤à§à¦¯à§‡à¦° à¦ªà¦¥à§‡ à¦šà¦²à§à¦¨à¥¤ @${targetName} âš–ï¸`,
            `à¦†à¦ªà¦¨à¦¾à¦° à¦šà§‹à¦–à§‡à¦° à¦‡à¦¬à¦¾à¦¦à¦¤ à¦•à¦¬à§à¦² à¦¹à§‹à¦•à¥¤ @${targetName} ðŸ‘€`,
            `à¦°à¦®à¦œà¦¾à¦¨à§‡à¦° à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ à¦«à§‹à¦à¦Ÿà¦¾ à¦°à¦¹à¦®à¦¤ à¦†à¦ªà¦¨à¦¾à¦° à¦—à¦¾à§Ÿà§‡ à¦ªà§œà§à¦•à¥¤ @${targetName} ðŸŒ§ï¸`,
            `à¦ˆà¦¦à§‡à¦° à¦¨à¦¤à§à¦¨ à¦œà¦¾à¦®à¦¾à¦° à¦®à¦¤à§‹à¦‡ à¦‰à¦œà§à¦œà§à¦¬à¦² à¦¹à§‹à¦• à¦†à¦ªà¦¨à¦¾à¦° à¦­à¦¬à¦¿à¦·à§à¦¯à§Žà¥¤ @${targetName} ðŸ‘•`,
            `à¦¸à§‡à¦¹à¦°à¦¿à¦° à¦¬à¦°à¦•à¦¤ à¦†à¦ªà¦¨à¦¾à¦° à¦°à¦¿à¦œà¦¿à¦•à§‡ à¦›à§œà¦¿à§Ÿà§‡ à¦ªà§œà§à¦•à¥¤ @${targetName} ðŸ¥˜`,
            `à¦‡à¦«à¦¤à¦¾à¦°à§‡à¦° à¦¤à§ƒà¦ªà§à¦¤à¦¿ à¦†à¦ªà¦¨à¦¾à¦° à¦®à¦¨à§‡ à¦ªà§à¦°à¦¶à¦¾à¦¨à§à¦¤à¦¿ à¦†à¦¨à§à¦•à¥¤ @${targetName} ðŸ¥¤`,
            `à¦¨à¦¾à¦®à¦¾à¦œà§‡à¦° à¦•à¦¾à¦¤à¦¾à¦° à¦¯à§‡à¦¨ à¦•à¦–à¦¨à§‹ à¦–à¦¾à¦²à¦¿ à¦¨à¦¾ à¦¥à¦¾à¦•à§‡à¥¤ @${targetName} ðŸ•Œ`,
            `à¦†à¦ªà¦¨à¦¾à¦° à¦¤à¦¸à¦¬à¦¿à¦¹ à¦¹à§‹à¦• à¦†à¦ªà¦¨à¦¾à¦° à¦œà¦¾à¦¨à§à¦¨à¦¾à¦¤à§‡à¦° à¦šà¦¾à¦¬à¦¿à¦•à¦¾à¦ à¦¿à¥¤ @${targetName} ðŸ—ï¸`,
            `à¦¦à§à¦¨à¦¿à§Ÿà¦¾ à¦“ à¦†à¦–à§‡à¦°à¦¾à¦¤à§‡ à¦†à¦ªà¦¨à¦¾à¦° à¦•à¦²à§à¦¯à¦¾à¦£ à¦¹à§‹à¦•à¥¤ @${targetName} ðŸŒ`,
            `à¦°à¦®à¦œà¦¾à¦¨à§‡à¦° à¦¶à§‡à¦· à¦¸à§‚à¦°à§à¦¯ à¦¹à¦¾à¦¸à§à¦• à¦†à¦ªà¦¨à¦¾à¦° à¦ à§‹à¦à¦Ÿà§‡à¥¤ @${targetName} â˜€ï¸`,
            `à¦®à¦¾à¦¸à§à¦Ÿà¦¾à¦° à¦¬à§‡à¦²à¦¾à¦²à§‡à¦° à¦¡à§à¦¯à¦¾à¦¶à¦¬à§‹à¦°à§à¦¡ à¦¥à§‡à¦•à§‡ à¦†à¦ªà¦¨à¦¾à¦•à§‡ à¦…à¦­à¦¿à¦¬à¦¾à¦¦à¦¨à¥¤ @${targetName} ðŸŽ–ï¸`,
            `à¦¬à¦¦à¦¨à¦œà¦° à¦¥à§‡à¦•à§‡ à¦†à¦²à§à¦²à¦¾à¦¹ à¦†à¦ªà¦¨à¦¾à¦•à§‡ à¦¹à§‡à¦«à¦¾à¦œà¦¤ à¦•à¦°à§à¦¨à¥¤ @${targetName} ðŸ§¿`,
            `à¦†à¦ªà¦¨à¦¾à¦° à¦ªà¦°à¦¿à¦¶à§à¦°à¦®à§‡à¦° à¦«à¦² à¦¸à¦“à§Ÿà¦¾à¦¬ à¦¹à¦¿à¦¸à§‡à¦¬à§‡ à¦œà¦®à¦¾ à¦¹à§‹à¦•à¥¤ @${targetName} ðŸ’Ž`,
            `à¦¦à§‹à§Ÿà¦¾ à¦•à¦°à¦¿ à¦†à¦ªà¦¨à¦¾à¦° à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ à¦«à¦°à¦¿à§Ÿà¦¾à¦¦ à¦•à¦¬à§à¦² à¦¹à§‹à¦•à¥¤ @${targetName} ðŸ¤²`,
            `à¦°à¦®à¦œà¦¾à¦¨à§‡à¦° à¦à¦‡ à¦°à¦¾à¦¤à§‡ à¦†à¦ªà¦¨à¦¾à¦° à¦†à¦®à¦²à¦¨à¦¾à¦®à¦¾ à¦­à¦¾à¦°à§€ à¦¹à§‹à¦•à¥¤ @${targetName} ðŸ“`,
            `à¦†à¦ªà¦¨à¦¾à¦° à¦ˆà¦®à¦¾à¦¨ à¦¹à§‹à¦• à¦ªà¦¾à¦¹à¦¾à§œà§‡à¦° à¦®à¦¤à§‹ à¦…à¦Ÿà¦²à¥¤ @${targetName} â›°ï¸`,
            `à¦°à¦®à¦œà¦¾à¦¨à§‡à¦° à¦¶à§‡à¦· à¦¦à¦¿à¦¨à§‡à¦“ à¦¯à§‡à¦¨ à¦‡à¦¬à¦¾à¦¦à¦¤ à¦¬à¦œà¦¾à§Ÿ à¦¥à¦¾à¦•à§‡à¥¤ @${targetName} â³`,
            `à¦ˆà¦¦à§‡à¦° à¦šà¦¾à¦à¦¦ à¦¦à§‡à¦–à¦¾ à¦¦à¦¿à¦• à¦†à¦ªà¦¨à¦¾à¦° à¦¸à§à¦–à§‡à¦° à¦–à¦¬à¦° à¦¨à¦¿à§Ÿà§‡à¥¤ @${targetName} ðŸŒ™`,
            `à¦–à§à¦¶à¦¿à¦° à¦à¦‡ à¦¦à¦¿à¦¨à§‡ à¦†à¦ªà¦¨à¦¾à¦° à¦®à§à¦–à§‡ à¦¹à¦¾à¦¸à¦¿ à¦¥à¦¾à¦•à§à¦•à¥¤ @${targetName} ðŸ˜Š`,
            `à¦†à¦²à§à¦²à¦¾à¦¹à¦° à¦¬à¦¿à¦¶à§‡à¦· à¦°à¦¹à¦®à¦¤ à¦†à¦ªà¦¨à¦¾à¦° à¦ªà¦°à¦¿à¦¬à¦¾à¦°à§‡à¦° à¦‰à¦ªà¦° à¦¥à¦¾à¦•à§à¦•à¥¤ @${targetName} ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦`,
            `à¦ªà¦¬à¦¿à¦¤à§à¦° à¦®à¦¾à¦¹à§‡ à¦°à¦®à¦œà¦¾à¦¨ à¦†à¦ªà¦¨à¦¾à¦° à¦œà§€à¦¬à¦¨ à¦¬à¦¦à¦²à§‡ à¦¦à¦¿à¦•à¥¤ @${targetName} âœ¨`,
            `à¦®à¦¾à¦¸à§à¦Ÿà¦¾à¦° à¦¬à§‡à¦²à¦¾à¦² à¦†à¦ªà¦¨à¦¾à¦° à¦œà¦¨à§à¦¯ à¦¶à§à¦­à¦•à¦¾à¦®à¦¨à¦¾ à¦•à¦°à¦›à§‡à¥¤ @${targetName} ðŸ›°ï¸`
        ];
        const randomCaption = captions[Math.floor(Math.random() * captions.length)];

        const msg = `âœ¨ ð—¥ð—”ð— ð—”ð——ð—”ð—¡ ð—¦ð—¨ð—¥ð—£ð—¥ð—œð—¦ð—˜ âœ¨\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n${randomCaption}\n\nâ³ à¦ˆà¦¦à§‡à¦° à¦¬à¦¾à¦•à¦¿: ${countdown}\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nðŸ›°ï¸ ð— ð—”ð—¦ð—§ð—˜ð—¥ ð—•ð—˜ð—Ÿð—”ð—Ÿ ð—¨ð—Ÿð—§ð—¥ð—”-ð—¡ð—˜ð—§\nâœ¡ï¸âƒðŸ…°ðŸ…³ðŸ…¼ðŸ…¸ðŸ‡³â”€Í¢Í¢à¦šà§ƒà¦¾à¦à¦¦à§‡à§ƒà¦à¦°à§ƒà¦ à¦ªà¦¾à§ƒà¦à¦¹à¦¾à§à¦à§œà§ƒà¦âœ¡ï¸`;

        return api.sendMessage({ 
            body: msg, 
            attachment: fs.createReadStream(cachePath), 
            mentions: [{ tag: `@${targetName}`, id: targetID }] 
        }, threadID, () => fs.unlinkSync(cachePath));
    } catch (e) { console.log(e); }
}

module.exports.run = async function ({ api, event, args }) {
    const { threadID, messageID, senderID, mentions } = event;
    let targetID = Object.keys(mentions).length > 0 ? Object.keys(mentions)[0] : senderID;
    await generateAndSendCard(api, threadID, targetID);
};
